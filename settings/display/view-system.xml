<!--
  Theme: Superkonna
  System view: carousel, background, system info
  Screen view: top bar (avatar, clock, battery, controllers)
-->

<theme>
  <formatVersion>7</formatVersion>

  <!-- ==========================================
       SYSTEM VIEW: Carousel + per-system art
       Three-layer composition:
       1. Background art (full-screen, per-system)
       2. Overlay (semi-transparent darken)
       3. Carousel (oversized Alekfull-NX geometry)
       ========================================== -->
  <view name="system">

    <!-- Layer 1: Per-system background artwork
         Path convention: assets/systems/{system.theme}.webp (or .jpg/.png)
         Falls back gracefully if image doesn't exist. -->
    <image name="cover" extra="true">
      <path>./assets/systems/${system.theme}.webp</path>
      <size>1 0</size>
      <origin>0 0.5</origin>
      <pos>0 0.35</pos>
      <minSize>1 1</minSize>
      <zIndex>-9</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="1" begin="0" duration="800" mode="easeOut"/>
      </storyboard>
    </image>

    <!-- Layer 2a: Full-screen darken overlay on system art -->
    <image name="background_overlay" extra="true">
      <size>1 1</size>
      <origin>0 0</origin>
      <pos>0 0</pos>
      <zIndex>-7</zIndex>
    </image>

    <!-- Layer 2b: Bottom gradient vignette for text readability -->
    <image name="bottom_vignette" extra="true">
      <path>./assets/fade-ver.png</path>
      <size>1 0.32</size>
      <origin>0 1</origin>
      <pos>0 1</pos>
      <zIndex>-6</zIndex>
      <rotation>180</rotation>
    </image>

    <!-- Layer 3: Oversized carousel (Alekfull-NX geometry)
         pos: -0.66 -0.10 makes the carousel 176% of screen width,
         centering ~3-4 visible logos while items trail off-screen.
         This creates the signature "big, immersive" feel. -->
    <carousel name="systemcarousel">
      <type>horizontal</type>
      <pos>-0.660 -0.10</pos>
      <size>1.76 1</size>
      <logoScale>1.15</logoScale>
      <logoSize>0.25 0.25</logoSize>
      <color>00000000</color>
      <maxLogoCount>5</maxLogoCount>
      <zIndex>42</zIndex>
      <logoAlignment>bottom</logoAlignment>
      <defaultTransition>slide</defaultTransition>
      <systemInfoDelay>200</systemInfoDelay>
      <minLogoOpacity>0.3</minLogoOpacity>
      <logoRotation>0</logoRotation>
      <logoRotationOrigin>0.5 0.5</logoRotationOrigin>
      <scrollSound>./assets/sounds/scroll.wav</scrollSound>
    </carousel>

    <!-- System name: bottom-left with slide-up + fade settle-in -->
    <text name="systemName" extra="true">
      <text>${system.fullName}</text>
      <origin>0 1</origin>
      <pos>0.05 0.82</pos>
      <size>0.6 ${fontSizeH1-medium}</size>
      <fontPath>${fontDisplay}</fontPath>
      <forceUppercase>1</forceUppercase>
      <lineSpacing>1</lineSpacing>
      <alignment>left</alignment>
      <zIndex>50</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="100" mode="linear"/>
        <animation property="opacity" from="0" to="1" begin="150" duration="250" mode="easeOut"/>
        <animation property="y" from="0.84" to="0.82" begin="150" duration="250" mode="easeOut"/>
      </storyboard>
    </text>

    <!-- Game count: below system name, slide-up settle-in -->
    <text name="systemInfo">
      <origin>0 1</origin>
      <pos>0.05 0.87</pos>
      <size>0.4 ${fontSizeBody-medium}</size>
      <alignment>left</alignment>
      <forceUppercase>1</forceUppercase>
      <fontPath>${fontBody}</fontPath>
      <lineSpacing>1.3</lineSpacing>
      <zIndex>50</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="150" mode="linear"/>
        <animation property="opacity" from="0" to="0.9" begin="200" duration="250" mode="easeOut"/>
        <animation property="y" from="0.885" to="0.87" begin="200" duration="250" mode="easeOut"/>
      </storyboard>
    </text>

    <!-- System manufacturer + year (regular systems only) -->
    <text name="systemManufacturer" extra="true">
      <text>{system:manufacturer} · {system:releaseYear}</text>
      <origin>0 1</origin>
      <pos>0.05 0.915</pos>
      <size>0.4 ${fontSizeCaption-medium}</size>
      <alignment>left</alignment>
      <fontPath>${fontLight}</fontPath>
      <lineSpacing>1.3</lineSpacing>
      <zIndex>50</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="200" mode="linear"/>
        <animation property="opacity" from="0" to="0.6" begin="250" duration="250" mode="easeOut"/>
        <animation property="y" from="0.93" to="0.915" begin="250" duration="250" mode="easeOut"/>
      </storyboard>
    </text>

    <!-- System logo SVG (used by carousel internally) -->
    <image name="logo">
      <path>./assets/logos/${system.theme}.svg</path>
      <reflexion>0.4 0</reflexion>
    </image>

    <!-- Fallback text when no logo SVG exists -->
    <text name="logoText">
      <origin>0.5 0.5</origin>
      <fontPath>${fontDisplay}</fontPath>
      <fontSize>${fontSizeH3-medium}</fontSize>
      <forceUppercase>1</forceUppercase>
      <alignment>center</alignment>
    </text>

  </view>

  <!-- OSD background (all game views) -->
  <view name="system, basic, detailed, grid">
    <image name="osdBackground" extra="true">
      <pos>0 0</pos>
      <origin>0 0</origin>
      <size>1 1</size>
      <zIndex>100</zIndex>
    </image>
  </view>

  <!-- ==========================================
       SCREEN VIEW: Top bar overlay
       Persistent across all views.
       ========================================== -->
  <view name="screen">

    <!-- Top bar background: floating rounded panel -->
    <image name="topbar_bg" extra="true">
      <pos>0.015 0.012</pos>
      <origin>0 0</origin>
      <size>0.97 0.055</size>
      <roundCorners>0.012</roundCorners>
      <zIndex>9</zIndex>
    </image>

    <!-- User avatar: top-left inside floating bar -->
    <image name="avatar" extra="true">
      <path>./assets/profile/avatar-default.png</path>
      <pos>0.03 0.02</pos>
      <origin>0 0</origin>
      <maxSize>0.03 0.035</maxSize>
      <zIndex>10</zIndex>
    </image>

    <!-- Profile badge: user silhouette + name + konnapenni balance
         Generated by scripts/update-profile.sh from romhoard API.
         Sits over the avatar (higher z) — the SVG includes its own user icon.
         When romhoard isn't running, the SVG won't exist and avatar shows through. -->
    <image name="profile_badge" extra="true">
      <path>./generated/profile-badge.svg</path>
      <origin>0 0.5</origin>
      <pos>0.028 0.039</pos>
      <maxSize>0.16 0.028</maxSize>
      <zIndex>12</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="1" begin="200" duration="400" mode="easeOut"/>
      </storyboard>
    </image>

    <!-- Controller activity dots: after badge area -->
    <controllerActivity name="controllerActivity">
      <origin>0 0.5</origin>
      <pos>0.20 0.039</pos>
      <size>0.014</size>
      <itemSpacing>0.004</itemSpacing>
      <imagePath>./assets/pin.svg</imagePath>
    </controllerActivity>

    <!-- RetroAchievements username: shown when cheevos enabled, after controller dots -->
    <text name="ra_user" extra="true" ifCheevos="true">
      <text>{global:cheevosUser}</text>
      <origin>0 0.5</origin>
      <pos>0.25 0.039</pos>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <fontPath>${fontLight}</fontPath>
      <lineSpacing>1</lineSpacing>
      <zIndex>11</zIndex>
    </text>

    <!-- Clock: top-right inside floating bar -->
    <text name="clock">
      <origin>1 0.5</origin>
      <pos>0.97 0.039</pos>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <fontPath>${fontLight}</fontPath>
      <lineSpacing>1</lineSpacing>
      <alignment>right</alignment>
    </text>

    <!-- Weather: file-swap icon, updated by scripts/update-weather.sh -->
    <image name="weather_icon" extra="true">
      <path>./generated/weather-icon.svg</path>
      <origin>1 0.5</origin>
      <pos>0.90 0.039</pos>
      <maxSize>0.022 0.022</maxSize>
      <zIndex>11</zIndex>
    </image>

    <text name="weather_temp" extra="true">
      <text> </text>
      <origin>1 0.5</origin>
      <pos>0.875 0.039</pos>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <fontPath>${fontLight}</fontPath>
      <alignment>right</alignment>
      <zIndex>11</zIndex>
    </text>

    <!-- Battery indicator: left of clock -->
    <batteryIndicator name="batteryIndicator">
      <origin>1 0.5</origin>
      <pos>0.845 0.039</pos>
      <size>0.016</size>
    </batteryIndicator>

  </view>
</theme>
