<!--
  Theme: Superkonna
  Flix view: Netflix-style horizontal game browser
  Layout: preview area (top 45%) + horizontal game strip (bottom 50%)
  Three-zone composition:
  1. Background art (selected game screenshot, full-bleed)
  2. Overlay (semi-transparent darken, separates art from grid)
  3. Horizontal game strip with edge fades + video preview
-->

<theme>
  <formatVersion>7</formatVersion>

  <customView name="flix" inherits="grid">

    <!-- === GAME GRID: Horizontal strip in lower half === -->
    <imagegrid name="gamegrid">
      <pos>0 0.50</pos>
      <size>1 0.475</size>
      <size ifHelpPrompts="true">1 0.44</size>
      <imageSource>thumb</imageSource>
      <scrollDirection>horizontal</scrollDirection>
      <animateSelection>true</animateSelection>
      <autoLayoutSelectedZoom>1.06</autoLayoutSelectedZoom>
      <padding>0.07 0.03</padding>
      <margin>0.02 0.03</margin>
      <scrollLoop>true</scrollLoop>
      <zIndex>5</zIndex>
      <scrollSound>./assets/sounds/tick.wav</scrollSound>
    </imagegrid>

    <!-- Tile rendering: fit box art proportionally -->
    <gridtile name="default, selected">
      <selectionMode>image</selectionMode>
      <imageSizeMode>maxSize</imageSizeMode>
    </gridtile>

    <gridtile name="default">
      <imageColor>FFFFFFFF</imageColor>
      <backgroundCornerSize>0.02</backgroundCornerSize>
    </gridtile>

    <gridtile name="selected">
      <backgroundCornerSize>0.02</backgroundCornerSize>
    </gridtile>

    <!-- Rounded corners on cover art -->
    <image name="gridtile.image">
      <roundCorners>0.02</roundCorners>
    </image>

    <image name="gridtile.image:selected">
      <roundCorners>0.02</roundCorners>
    </image>

    <!-- Favorite badge on tiles -->
    <image name="gridtile.favorite">
      <path>./assets/icons/favorite.png</path>
      <pos>0 0</pos>
      <maxSize>0.25 0.25</maxSize>
      <origin>0 0</origin>
    </image>

    <!-- === EDGE FADES: Soft left/right bleed on game strip === -->
    <image name="verticalFadeLeft,verticalFadeRight" extra="true">
      <origin>0.5 0.5</origin>
      <size>0.05 0.50</size>
      <path>./assets/fade-hor.png</path>
      <zIndex>6</zIndex>
    </image>

    <image name="verticalFadeLeft" extra="true">
      <pos>0.025 0.7375</pos>
    </image>

    <image name="verticalFadeRight" extra="true">
      <pos>0.975 0.7375</pos>
      <rotation>180</rotation>
    </image>

    <!-- === PREVIEW AREA: Top half === -->

    <!-- Selected game marquee/logo (upper-left area) -->
    <image name="md_marquee">
      <pos>0.24 0.11</pos>
      <origin>0.5 0.5</origin>
      <maxSize>0.38 0.18</maxSize>
      <zIndex>6</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="60" mode="linear"/>
        <animation property="opacity" from="0" to="1" begin="120" duration="200" mode="easeOut"/>
        <animation property="scale" from="0.95" to="1" begin="120" duration="250" mode="Bump"/>
      </storyboard>
    </image>

    <!-- Background screenshot of selected game (right side, full-bleed) -->
    <image name="md_image">
      <origin>0.5 0.5</origin>
      <pos>0.7 0.25</pos>
      <minSize>0.7 0.55</minSize>
      <zIndex>-1</zIndex>
      <roundCorners>0.01</roundCorners>
      <storyboard>
        <animation property="opacity" from="0" to="1" begin="0" duration="400" mode="easeOut"/>
      </storyboard>
    </image>

    <!-- Video preview: plays after 0.5s delay over screenshot -->
    <video name="md_video">
      <origin>0.5 0.5</origin>
      <pos>0.7 0.25</pos>
      <minSize>0.6 0.5</minSize>
      <zIndex>0</zIndex>
      <delay>0.5</delay>
      <showSnapshotNoVideo>false</showSnapshotNoVideo>
      <showSnapshotDelay>true</showSnapshotDelay>
      <snapshotSource>thumbnail</snapshotSource>
      <roundCorners>0.02</roundCorners>
      <effect>none</effect>
      <storyboard>
        <animation property="opacity" from="0" to="1" begin="0" duration="300" mode="easeOut"/>
      </storyboard>
    </video>

    <!-- Rating: below marquee -->
    <rating name="md_rating">
      <visible>true</visible>
      <origin>0 0</origin>
      <filledPath>./assets/icons/star.svg</filledPath>
      <unfilledPath>./assets/icons/star_border.svg</unfilledPath>
      <pos>0.05 0.22</pos>
      <size>0.07 0.022</size>
      <zIndex>5</zIndex>
    </rating>

    <!-- Genre: below rating -->
    <text name="md_genre">
      <visible>true</visible>
      <pos>0.05 0.255</pos>
      <size>0.38 ${fontSizeCaption-medium}</size>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <fontPath>${fontLight}</fontPath>
      <alignment>left</alignment>
      <zIndex>5</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="80" mode="linear"/>
        <animation property="opacity" from="0" to="0.6" begin="200" duration="200" mode="easeOut"/>
      </storyboard>
    </text>

    <!-- Game description: below genre, generous line spacing -->
    <text name="md_description">
      <visible>true</visible>
      <pos>0.05 0.29</pos>
      <size>0.4 0.13</size>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <fontPath>${fontLight}</fontPath>
      <lineSpacing>1.4</lineSpacing>
      <zIndex>5</zIndex>
      <storyboard>
        <animation property="opacity" from="0" to="0" duration="60" mode="linear"/>
        <animation property="opacity" from="0" to="0.85" begin="180" duration="220" mode="easeOut"/>
      </storyboard>
    </text>

    <!-- Badge row: below description, above game strip -->
    <image name="badge_cheevos" extra="true">
      <path>./assets/icons/trophy.svg</path>
      <visible>{game:cheevos}</visible>
      <pos>0.05 0.44</pos>
      <maxSize>0.016 0.016</maxSize>
      <origin>0 0.5</origin>
      <zIndex>6</zIndex>
    </image>

    <image name="badge_mature" extra="true">
      <path>./assets/icons/mature.svg</path>
      <visible>!{game:kidGame}</visible>
      <pos>0.07 0.44</pos>
      <maxSize>0.016 0.016</maxSize>
      <origin>0 0.5</origin>
      <zIndex>6</zIndex>
    </image>

    <image name="badge_savestate" extra="true">
      <path>./assets/icons/savestate.svg</path>
      <visible>{game:hasSaveState}</visible>
      <pos>0.09 0.44</pos>
      <maxSize>0.016 0.016</maxSize>
      <origin>0 0.5</origin>
      <zIndex>6</zIndex>
    </image>

    <!-- Hide remaining metadata labels -->
    <text name="md_lbl_rating, md_lbl_releasedate, md_lbl_developer, md_lbl_publisher, md_lbl_genre, md_lbl_players, md_lbl_lastplayed, md_lbl_playcount, md_releasedate, md_developer, md_publisher, md_players, md_lastplayed, md_playcount, md_name">
      <visible>false</visible>
    </text>

    <datetime name="md_releasedate, md_lastplayed">
      <visible>false</visible>
    </datetime>

    <!-- Semi-transparent overlay between bg art and grid -->
    <image name="background_overlay" extra="true">
      <size>1 1</size>
      <origin>0 0</origin>
      <pos>0 0</pos>
      <zIndex>4</zIndex>
    </image>

    <!-- Top vignette: subtle fade for preview area text -->
    <image name="top_vignette" extra="true">
      <path>./assets/fade-ver.png</path>
      <size>1 0.3</size>
      <origin>0 0</origin>
      <pos>0 0</pos>
      <zIndex>4</zIndex>
    </image>

    <!-- Tile label: game name below cover art -->
    <text name="gridtile">
      <size>1 0.2</size>
      <pos>0 0.78</pos>
      <fontPath>${fontBody}</fontPath>
      <fontSize>${fontSizeCaption-medium}</fontSize>
      <alignment>center</alignment>
      <lineSpacing>1.2</lineSpacing>
    </text>

    <!-- Hide tile marquee (we show the full marquee in preview area) -->
    <image name="gridtile.marquee">
      <color>00000000</color>
    </image>

    <!-- System name: top-left above game strip -->
    <text name="logoText">
      <origin>0 0.5</origin>
      <pos>0.05 0.46</pos>
      <size>0.4 ${fontSizeH3-medium}</size>
      <fontSize>${fontSizeH3-medium}</fontSize>
    </text>

  </customView>
</theme>
